<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>NEWX·后台管理 -报名统计 </title>

		<meta name="description" content="Dashboard">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<!--Basic __PUBLIC__/admin/styles-->
		<link href="__PUBLIC__/admin/style/bootstrap.css" rel="stylesheet">
		<link href="__PUBLIC__/admin/style/font-awesome.css" rel="stylesheet">
		<link href="__PUBLIC__/admin/style/weather-icons.css" rel="stylesheet">

		<!--Beyond __PUBLIC__/admin/styles-->
		<link id="beyond-link" href="__PUBLIC__/admin/style/beyond.css" rel="stylesheet" type="text/css">
		<link href="__PUBLIC__/admin/style/demo.css" rel="stylesheet">
		<link href="__PUBLIC__/admin/style/typicons.css" rel="stylesheet">
		<link href="__PUBLIC__/admin/style/animate.css" rel="stylesheet">
		<link rel="shortcut icon" href="__PUBLIC__/admin/images/newx.ico" />
		<link rel="stylesheet" href="__PUBLIC__/layui/css/layui.css">
		<style type="text/css">
			#main1,
			#main2,
			#main3,
			#main4 {
				float: left;
			}
		</style>
	</head>

	<body>
		{include file="common/top" /}

		<!-- /头部 -->

		<div class="main-container container-fluid">
			<div class="page-container">
				<!-- Page Sidebar -->
				<div class="page-sidebar" id="sidebar">
					<!-- Page Sidebar Header-->
					<div class="sidebar-header-wrapper">
						<input class="searchinput" type="text" disabled="disabled">
					</div>
					<!-- /Page Sidebar Header -->
					{include file="common/left" /}
					<!-- /Page Sidebar -->
					<!-- Page Content -->
					<div class="page-content">
						<!-- Page Breadcrumb -->
						<div class="page-breadcrumbs">
							<ul class="breadcrumb">
								<li>
									<a href="#">系统</a>
								</li>
								<li class="active">报名统计</li>
							</ul>
						</div>
						<!-- /Page Breadcrumb -->

						<!-- Page Body -->
						<div class="page-body">
							<div id="main1" style="width: 600px;height:300px;"></div>
							<div id="main2" style="width: 600px;height:300px;"></div>
							<div id="main3" style="width: 600px;height:300px;"></div>
							<div id="main4" style="width: 600px;height:300px;"></div>
						</div>
						<!-- /Page Body -->
					</div>
					<!-- /Page Content -->
				</div>
			</div>

			<!--Basic Scripts-->
			<script src="__PUBLIC__/admin/style/jquery_002.js"></script>
			<script src="__PUBLIC__/admin/style/bootstrap.js"></script>
			<script src="__PUBLIC__/admin/style/jquery.js"></script>
			<!--Beyond Scripts-->
			<script src="__PUBLIC__/admin/style/beyond.js"></script>
			<script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts-en.common.js"></script>
			<script src="__PUBLIC__/admin/style/shine.js"></script>
			<script>
				// 第二个参数可以指定前面引入的主题
				var chart1 = echarts.init(document.getElementById('main1'));
				var chart2 = echarts.init(document.getElementById('main2'));
				var chart3 = echarts.init(document.getElementById('main3'));
				var chart4 = echarts.init(document.getElementById('main4'));

				//异步加载后台数据， 通过定时器在实现
				var i = 0;

				function run() {
					i++;
					$.ajax({
						url: "{:url('apply/data')}",
						type: 'POST',
						dataType: 'JSON',
						data: {},
						success: function(data) {

							chart1.setOption({
								title: {
									text: '第一志愿报名统计',
									//subtext: '纯属虚构',
									x: 'center'
								},
								tooltip: {
									trigger: 'item',
									formatter: "{a} <br/>{b} : {c} ({d}%)"
								},
								legend: {
									orient: 'vertical',
									left: 'left',
									data: ['视频部', '采风部', '图文部', '网站部', '办公室', '运营部', '采编部']
								},
								series: [{
									name: '一志愿人数',
									type: 'pie',
									radius: '55%',
									center: ['50%', '60%'],
									data: [{
											value: data[0],
											name: '视频部'
										},
										{
											value: data[1],
											name: '采风部'
										},
										{
											value: data[2],
											name: '图文部'
										},
										{
											value: data[3],
											name: '网站部'
										},
										{
											value: data[4],
											name: '办公室'
										},
										{
											value: data[5],
											name: '运营部'
										},
										{
											value: data[6],
											name: '采编部'
										}
									],
									itemStyle: {
										emphasis: {
											shadowBlur: 10,
											shadowOffsetX: 0,
											shadowColor: 'rgba(0, 0, 0, 0.5)'
										}
									}
								}]

							})
							chart2.setOption({
								title: {
									text: '第一志愿报名统计',
									//subtext: '纯属虚构',
									x: 'center'
								},
								tooltip: {
									trigger: 'item',
									formatter: "{a} <br/>{b} : {c} ({d}%)"
								},
								legend: {
									orient: 'vertical',
									left: 'left',
									data: ['视频部', '采风部', '图文部', '网站部', '办公室', '运营部', '采编部']
								},
								series: [{
									name: '一志愿人数',
									type: 'pie',
									radius: '55%',
									center: ['50%', '60%'],
									data: [{
											value: data[7],
											name: '视频部'
										},
										{
											value: data[8],
											name: '采风部'
										},
										{
											value: data[9],
											name: '图文部'
										},
										{
											value: data[10],
											name: '网站部'
										},
										{
											value: data[11],
											name: '办公室'
										},
										{
											value: data[12],
											name: '运营部'
										},
										{
											value: data[13],
											name: '采编部'
										}
									],
									itemStyle: {
										emphasis: {
											shadowBlur: 10,
											shadowOffsetX: 0,
											shadowColor: 'rgba(0, 0, 0, 0.5)'
										}
									}
								}]

							})
							
							chart3.setOption({
								title: {
									text: '第一志愿男女比',
									//subtext: '纯属虚构',
									x: 'left'
								},
								legend: {},
								tooltip: {},
								dataset: {
									source: [
										['男女比', '男', '女'],
										['视频部', data[14], data[21] ],
										['采风部', data[15], data[22] ],
										['图文部', data[16], data[23] ],
										['网站部', data[17], data[24] ],
										['办公室', data[18], data[25] ],
										['运营部', data[19], data[26] ],
										['采编部', data[20], data[27] ],
									]
								},
								xAxis: {
									type: 'category'
								},
								yAxis: {},
								// Declare several bar series, each will be mapped
								// to a column of dataset.source by default.
								series: [{
										type: 'bar',
										color: ['#334B5C']
									},
									{
										type: 'bar',
										color: ['#D53A35']
									},
								]
							})
							
							chart4.setOption({
								title: {
									text: '第二志愿男女比',
									//subtext: '纯属虚构',
									x: 'left'
								},
								legend: {},
								tooltip: {},
								dataset: {
									source: [
										['男女比', '男', '女'],
										['视频部', data[28], data[35] ],
										['采风部', data[29], data[36] ],
										['图文部', data[30], data[37] ],
										['网站部', data[31], data[38] ],
										['办公室', data[32], data[39] ],
										['运营部', data[33], data[40] ],
										['采编部', data[34], data[41] ],
									]
								},
								xAxis: {
									type: 'category'
								},
								yAxis: {},
								// Declare several bar series, each will be mapped
								// to a column of dataset.source by default.
								series: [{
										type: 'bar',
										color: ['#334B5C']
									},
									{
										type: 'bar',
										color: ['#D53A35']
									},
								]
							})
							
							
						}
					})
				};
				var time = setInterval(run, 500);
			</script>

	</body>

</html>